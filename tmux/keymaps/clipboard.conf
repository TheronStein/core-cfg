
# Clipboard integrationn
set -g set-clipboard on
set -s copy-command "wl-copy"

bind f12 copy-mode \; display "copy mode"
bind C-] choose-buffer
# Copy mod
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "${TMUX_SCRIPTS}/clipboard.sh copy"
bind -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "${TMUX_SCRIPTS}/clipboard.sh copy"
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "${TMUX_SCRIPTS}/clipboard.sh copy"

# Paste from clipboard
bind-key p run-shell 'if [ "$XDG_SESSION_TYPE" = "wayland" ]; then tmux set-buffer "$(wl-paste)"; else tmux set-buffer "$(xclip -selection clipboard -o)"; fi; tmux paste-buffer'

bind-key -T copy-mode-vi O send -X copy-pipe-and-cancel "{TMUX_SCRIPTS}/open-editor.sh"

## Unused

# unbind -n C-Enter
# bind Escape copy-mode     # default: [
# bind -n C-Enter copy-mode
# bind -N "Enter copy-mode"    Enter copy-mode
# bind ] paste-buffer
# bind -n M-[ copy-mode \; display "copy mode"
### Clipboard handling

# Test if your terminal sends hyper properly
# bind-key -n 0x20-w select-pane -U
# bind-key -n 0x20-a select-pane -L
# bind-key -n 0x20-s select-pane -D
# bind-key -n 0x20-d select-pane -R


# if 'builtin command -v xsel > /dev/null 2>&1' \
#   "run-shell 'tmux bind -Tcopy-mode-vi Enter send -X copy-pipe-and-cancel \"xsel -i --clipboard\"'"
# if 'builtin command -v xclip > /dev/null 2>&1' \
#   "run-shell 'tmux bind -Tcopy-mode-vi Enter send -X copy-pipe-and-cancel \"xclip -i -selection clipboard\"'"
# if '$WAYLAND_DISPLAY != "" && builtin command -v wl-copy > /dev/null 2>&1' \
#   "run-shell 'tmux bind -Tcopy-mode-vi Enter send -X copy-pipe-and-cancel \"wl-copy\"'"#
# Replace with this single conditional block:
# if-shell '$WAYLAND_DISPLAY != "" && command -v wl-copy > /dev/null 2>&1' \
#   'bind -T copy-mode-vi Enter send -X copy-pipe-and-cancel "wl-copy"' \
#   'if-shell "command -v xclip > /dev/null 2>&1" \
#     "bind -T copy-mode-vi Enter send -X copy-pipe-and-cancel \"xclip -i -selection clipboard\"" \
#     "if-shell \"command -v xsel > /dev/null 2>&1\" \
#       \"bind -T copy-mode-vi Enter send -X copy-pipe-and-cancel \\\"xsel -i --clipboard\\\"\" \
#       \"display \\\"No clipboard tool found\\\"\""'
