#!/usr/bin/env bash
# Read WezTerm mode indicator for tmux status bar

STATUS_FILE="${XDG_RUNTIME_DIR}/wezterm-tmux-status"

# Default if file doesn't exist or can't be read
DEFAULT_MODE="#[bold,fg=#1A1A1A,bg=#4D908E] ‚å® NORMAL "

if [[ -f "$STATUS_FILE" ]]; then
    # Read mode from file
    MODE=$(grep "^MODE=" "$STATUS_FILE" | cut -d'=' -f2-)
    if [[ -n "$MODE" ]]; then
        echo -n "$MODE"
    else
        echo -n "$DEFAULT_MODE"
    fi
else
    echo -n "$DEFAULT_MODE"
fi
