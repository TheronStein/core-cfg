#!/bin/bash
# Get the display name for a tmux session
# If it's a view session (name-view-timestamp-random), show only the parent name
# Otherwise, show the session name as-is

# Get session name - either from argument or from current tmux session
if [[ -n "$1" ]]; then
    session_name="$1"
else
    session_name="$(tmux display-message -p '#S' 2>/dev/null)"
fi

# Check if this is a view session (matches pattern: *-view-*-*)
if [[ "$session_name" =~ ^(.+)-view-[0-9]+-[0-9]+$ ]]; then
    # Extract parent session name (everything before -view-)
    echo "${BASH_REMATCH[1]}"
else
    # Not a view session, return as-is
    echo "$session_name"
fi
