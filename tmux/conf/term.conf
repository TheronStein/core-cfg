# ============================================================================
# TERMINAL CONFIGURATION - WezTerm Optimized
# ============================================================================
# Best practices for tmux + WezTerm with Kitty keyboard protocol

# Primary configuration, assuming the outer TERM is 'wezterm'
set -g default-terminal "tmux-256color" 
set -s escape-time 0
set -s extended-keys always
set -s extended-keys-format csi-u
set -g allow-passthrough on # Don't forget this one

# Reference 'wezterm*' for features
# Combined most features into one line for cleanliness
set -as terminal-features ",wezterm*:RGB:extkeys:clipboard:ccolour:cstyle:focus:mouse:strikethrough:usstyle:sync:hyperlinks"

# Reference 'tmux-256color' (or whatever your default-terminal is) for internal settings
set -as terminal-features ",*256col*:RGB:usstyle:overline:strikethrough:sync" 

# Keep the specific OSC 52 clipboard override if needed for older systems/remote SSH
set -ga terminal-overrides ",wezterm*:Ms=\\E]52;c;%p2%s\\7"
set -ga terminal-overrides ",xterm-256color:Tc,wezterm*:Tc,xterm-kitty:Tc"
set -gas terminal-overrides ',wezterm*:Tc'

# ============================================================================
# IMAGE & SIXEL SUPPORT
# ============================================================================
# Enable sixel graphics for image preview (yazi, etc.)
# set -ga terminal-overrides ",*:sixel,wezterm*:sixel"

# ============================================================================
# SERVER SETTINGS
# ============================================================================
set -s editor "${EDITOR}"                # Use your preferred editor
set -s set-clipboard on                  # Use OSC 52 for clipboard
set -s escape-time 10                    # Fast escape detection (good for vim)
set -s exit-empty on                     # Exit when no active sessions
set -s focus-events on                   # Request focus events from terminal
set -s buffer-limit 200                  # Number of paste buffers

# ============================================================================
# SESSION & PERFORMANCE SETTINGS
# ============================================================================
# Display settings
set -g display-time 2000
set -g display-panes-time 2000
set -g assume-paste-time 1               # Optimize for fast pasting

# Activity monitoring
set -g monitor-activity on
set -g visual-activity off

# Bell settings
set -g bell-action none
set -g visual-bell off

# ============================================================================
# ADDITIONAL SETTINGS FROM ENV.CONF (consolidated here)
# ============================================================================
# Enable escape sequences for WezTerm communication
# set -g allow-passthrough on

# Optimize for image rendering performance
set -g assume-paste-time 1

# vim: ft=tmux:et:sw=0:ts=2:sts=2:fdm=marker:fmr=[[[,]]]:
