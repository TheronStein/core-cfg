# == Colors ================================================================= [[[
# Prefix Config
set -g @prefix_highlight_empty_prompt ' '
set -g @prefix_highlight_empty_attr "fg=$base0E,bg=$base00"
set -g @prefix_highlight_prefix_prompt '[‚å®]Ô¨ø'
set -g @prefix_highlight_fg $baseWaveRed
set -g @prefix_highlight_bg $base00
set -g @prefix_highlight_copy_prompt '[C]Ô¨ø'
set -g @prefix_highlight_show_copy_mode 'on'
set -g @prefix_highlight_copy_mode_attr "fg=$base0D,bg=$base00"
set -g @prefix_highlight_sync_prompt '[S]Ô¨ø'
set -g @prefix_highlight_show_sync_mode 'on'
set -g @prefix_highlight_sync_mode_attr "fg=$base0A,bg=$base00"

set -g display-panes-active-colour $base08 # pane number display
set -g display-panes-colour        $base01 # color used by the display-panes command to show indicators for inactive panes

set -wg pane-border-lines        heavy      # set the type of characters used for drawing pane borders
set -wg pane-border-style        fg=$base03 # border style for panes aside from the active pane

# 3.4 version later
if -F '#{m/r:3\.[4-9]$,#{version}}' {
    set -wg popup-border-lines rounded      # set the type of line used to draw popup borders
    set -wg popup-border-style fg=$base08   # set the style for the popup's border
}

# set pane border format string ‚ùê Ôâç
set -wg pane-border-format \
  '#[align=right] \
#{?#{&&:#{pane_active},#{client_prefix}},#[underscore],}\
#{pane_current_command} ÔÖ∑ #{pane_tty} #{?pane_active,Ôâç #S:#I/#{session_windows} ,}\
#{?window_zoomed_flag,‚¨¢,‚ùÑ} #P '

# style of border of active pane
set -wg pane-active-border-style \
    '#{?pane_in_mode,fg=#{base0D},\
     #{?synchronize-panes,fg=#{baseGreen}#,bold,\
     #{?#{==:#{client_key_table},resize},fg=white,fg=#{baseAmethyst}#,bold}}}'

# == Status Bar ============================================================= [[[
tm_date="#[fg=magenta] %Y-%m-%d %I:%M %p "
tm_cpu=" #($HOME/.core/bin/tmux/cpu)"
tm_mem=" #($HOME/.core/bin/tmux/mem)"
# tm_prefix="#[bold,fg=$baseAmethyst]#{?client_prefix, ‚å® ,  }"
# tm_prefix="#[bold,#{?client_prefix,fg=$baseGreen] ‚å® ,fg=$baseAmethyst] ‚å® }"
tm_prefix="#{prefix_highlight}"
tm_zoom="#[default,bg=$base00,fg=$base0D] #{?window_zoomed_flag,Ôûì,Ôûí}"
tm_upTime="#[default,fg=$base07,bg=$base00] #($HOME/.core/bin/tmux/time)"
tm_pane="#[default,bg=$base00, fg=$base0F] Ôâç #P"

set -g status              on      # show / hide the stl or specify its size
set -g status-left-length  30      # set max length of left component of stl
set -g status-right-length 150     # set max length of right component of stl
set -g status-position     top  # put stl on top or bottom
set -g status-interval     10      # interval in secs to update status
set -g status-justify      centre  # set the position of the win list in the stl (left, center, right)
set -g status-style        "fg=$base02,bg=$base00,default" # appearance of status messages

set  -g  status-bg     $base00   # set the background style used by the status bar
set  -g  status-right "$tm_prefix $tm_pane $tm_upTime $tm_mem $tm_cpu $tm_zoom $tm_date" # Display string to the right of the status line
set  -g  status-left            "#[default,bg=$base00,fg=$base0F] ÔÑµ #S " # display string to the left of stl
setw -g  window-status-format   "#[fg=$baseWaveRed] #I #W "              # set format in which win is displayed in stl win list
setw -g  window-status-style    "fg=$base03,bg=$base00"                  # set stl style for a single win
setw -g  window-status-current-format " #[bold,fg=$base0F][#W #T]"       # like WSF, but is format used when the win is the current win
setw -g  window-status-current-style  "fg=$base0D,bg=$base00"            # set stl style for the currently active win
setw -g  window-status-separator      ''                                 # sets the separator drawn between windows in the stl
setw -g  window-status-activity-style "bg=$baseBg"        # set stl for wins with an activity alert
setw -g  window-status-bell-style     "bg=$baseBg"        # set stl for wins with a bell alert

set -g message-style         "bold,bg=$base00,fg=$base0F" # set stl msg style. used for msgs & command prompt
set -g message-command-style "bold,fg=$base11"            # appearance of status message cmds
set -g mode-style            "fg=$baseBg,bg=$base11"      # set window modes style
# ]]]
# ]]]


# if-shell ': ${TMUX_POWERLINE_SYMBOLS?}' '' 'set-environment -g TMUX_POWERLINE_SYMBOLS "unicode"'
#
# if-shell 'test "$(tput colors)" -lt 8' 'set-environment -g TMUX_POWERLINE_FLAG "#F"' 'set-environment -g TMUX_POWERLINE_FLAG ""'
#
# # ASCII glyphs which don't require patched font or Unicode support
# if-shell 'test $(echo "${TMUX_POWERLINE_SYMBOLS}") = "ascii"' 'set-environment -g TMUX_POWERLINE_SYMBOL_RIGHT_FULL ""'
# if-shell 'test $(echo "${TMUX_POWERLINE_SYMBOLS}") = "ascii"' 'set-environment -g TMUX_POWERLINE_SYMBOL_RIGHT_THIN "|"'
# if-shell 'test $(echo "${TMUX_POWERLINE_SYMBOLS}") = "ascii"' 'set-environment -g TMUX_POWERLINE_SYMBOL_LEFT_FULL ""'
# if-shell 'test $(echo "${TMUX_POWERLINE_SYMBOLS}") = "ascii"' 'set-environment -g TMUX_POWERLINE_SYMBOL_LEFT_THIN "|"'
#
# # Unicode glyphs which don't require patched font
# if-shell 'test $(echo "${TMUX_POWERLINE_SYMBOLS}") = "unicode"' 'set-environment -g TMUX_POWERLINE_SYMBOL_RIGHT_FULL ""'
# if-shell 'test $(echo "${TMUX_POWERLINE_SYMBOLS}") = "unicode"' 'set-environment -g TMUX_POWERLINE_SYMBOL_RIGHT_THIN "‚îÇ"'
# if-shell 'test $(echo "${TMUX_POWERLINE_SYMBOLS}") = "unicode"' 'set-environment -g TMUX_POWERLINE_SYMBOL_LEFT_FULL ""'
# if-shell 'test $(echo "${TMUX_POWERLINE_SYMBOLS}") = "unicode"' 'set-environment -g TMUX_POWERLINE_SYMBOL_LEFT_THIN "‚îÇ"'
#
# set-window-option -g window-status-format "#[bg=colour244 fg=colour236 nounderscore]${TMUX_POWERLINE_SYMBOL_RIGHT_FULL}#[bg=colour244 fg=colour235]#{?window_last_flag,#[bg=colour252 fg=colour235 none],}#{?window_activity_flag,#[bg=colour219 fg=colour235 none],}#{?window_bell_flag,#[bg=red fg=colour235 underscore],} #I${TMUX_POWERLINE_FLAG} #[bg=colour244 fg=colour236 reverse]${TMUX_POWERLINE_SYMBOL_RIGHT_FULL}#[fg=colour231 bg=colour240 none] #{?#{m:#W,zsh},#{=/8/‚Ä¶:#{?#{m:#{pane_current_path},${HOME}},~,#{b:pane_current_path}}},#W} #[bg=colour236 fg=colour236 none]${TMUX_POWERLINE_SYMBOL_RIGHT_FULL}"

# Status line
set -g status-left-length 40
set -g status-right-length 60

# ‚îÅ‚îÅ‚îÅHooks‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ [[[

# show-hooks [-gpw]    [-t target-pane]
# set-hook   [-agpRuw] [-t target-pane] hook-name command
#   -a  ‚Üí append to hook
#   -g  ‚Üí add hook to global list
#   -p  ‚Üí set pane hooks
#   -R  ‚Üí run hook immediately
#   -t  ‚Üí specify target session
#   -u  ‚Üí unset a hook
#   -w  ‚Üí set window hooks

# client-active           when a client becomes the latest active client of its session.
# client-focus-in         when focus enters a client
# client-focus-out        when focus exits a client
# client-resized          when a client is resized.
# client-session-changed  when a client's attached session is changed.
# pane-died               when the program running in a pane exits, but remain-on-exit is on so the pane has not closed.
# pane-exited             when the program running in a pane exits.
# pane-focus-in           when the focus enters a pane, if the focus-events option is on.
# pane-focus-out          when the focus exits a pane, if the focus-events option is on.
# pane-set-clipboard      when the terminal clipboard is set using the xterm(1) escape sequence.
# session-created         when a new session created.
# session-closed          when a session closed.
# window-linked           when a window is linked into a session.
# window-renamed          when a window is renamed.
# window-resized          when a window is resized.  This may be after the client-resized hook is run.
# window-unlinked         when a window is unlinked from a session.

# # Auto hide pane-border-status line when only one pane is displayed (see tmux/tmux#566)
set-hook -g after-new-session  { if -F '#{==:#{window_panes},2}' 'set pane-border-status off' 'set pane-border-status top' }
set-hook -g after-new-window   { if -F '#{==:#{window_panes},1}' 'set pane-border-status off' 'set pane-border-status top' }
set-hook -g after-kill-pane    { if -F '#{==:#{window_panes},1}' 'set pane-border-status off' 'set pane-border-status top' }
set-hook -wg window-linked      { if -F '#{==:#{window_panes},1}' 'display "link one"' 'display "link two"' }
set-hook -wg window-unlinked    { if -F '#{==:#{window_panes},1}' 'display "unlink one"' 'display "unlink two"' }
# set-hook -p after-join-pane    { if -F '#{==:#{window_panes},1}' 'set pane-border-status off' 'set pane-border-status top' }
# set-hook -p after-break-pane    { if -F '#{==:#{window_panes},1}' 'set pane-border-status off' 'set pane-border-status top' }
set-hook -g pane-exited        { if -F '#{==:#{window_panes},3}' 'set pane-border-status off' 'set pane-border-status top' }
set-hook -g after-split-window { run -b "if [ #{window_panes} -gt 1 ]; then tmux set pane-border-status top; fi" }

set-hook -g after-resize-pane {
  if -F '#{||:#{==:#{window_panes},1},#{window_zoomed_flag}}' {
    set -g pane-border-status off
  } {
    set -g pane-border-status top
  }
}

# set-hook -g after-split-window { select-pane -T "" }
# set-hook -g after-new-window   { select-pane -T "" }
# set-hook -g after-new-session  { select-pane -T "" }

# Allow for respawning windows after the command has exited
# set-hook -g session-created 'set remain-on-exit on'

# set-hook -ga client-focus-in  { set -w status on }
# set-hook -ga client-focus-out { set -w status off }
set-hook -ga client-focus-in[0]  { setw -g  window-status-format "#[fg=$baseWaveRed] #I #W " }
set-hook -ga client-focus-out[0] { setw -g  window-status-format "#[fg=$base03] #I #W " }

# set-window-option -g status-style "bg=colour030" # Gray
# set -g window-status-current-style "bg=colour75,fg=white,bold"
# set -g status-left "#[fg=#04d1f9,bold]#S #[fg=#987afb]#I:#P "
# set -g status-right '#[fg=cyan]#{?#{m:*wezterm*,#{client_name}},üñ•Ô∏è ,} #[fg=white]| #[fg=magenta]Continuum: #{continuum_status} #[fg=yellow]%H:%M #[fg=orange]%d-%b-%y'
#
# # pane-border("single", "double", "heavy", "simple", "number", NULL)
# set-option -g pane-border-lines heavy
#
# set-option -g pane-border-style "fg=colour244"
# set-option -g pane-active-border-style "fg=colour220"
# # message text
# set-option -g message-style "bg=colour235,fg=colour63"
# #set-option -g message-style "bg=colour235,fg=colour76"
# # pane number display
# set-option -g display-panes-active-colour colour33 #blue
# set-option -g display-panes-colour colour166 #orange
# # clock
# set-window-option -g clock-mode-colour colour64 #green
# # bell
# set-window-option -g window-status-bell-style "fg=colour235,bg=colour160"
