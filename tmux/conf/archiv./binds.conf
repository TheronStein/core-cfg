# Quick save/restore with confirmation
bind-key 'M-s' confirm-before -p "Save session? (y/n)" "run-shell '${TMUX_PLUGIN_DIR}/tmux-resurrect/scripts/save.sh'"
bind-key 'M-r' confirm-before -p "Restore session? (y/n)" "run-shell '${TMUX_PLUGIN_DIR}/tmux-resurrect/scripts/restore.sh'"

# Save with timestamp feedback
bind-key 'M-S' run-shell '
  $TMUX_CONF/plugins/tmux-resurrect/scripts/save.sh && \
  tmux display-message "Session saved at $(date +%H:%M:%S)"'

# Restore with file selection
bind-key 'M-R' run-shell '
  if [ -d ~/.tmux/resurrect ]; then
    file=$(ls -t ${TMUX_RESURRECT}/*.txt 2>/dev/null | head -1)
    if [ -n "$file" ]; then
      ${TMUX_PLUGIN_DIR}/tmux-resurrect/scripts/restore.sh
      tmux display-message "Restored from: $(basename $file)"
    else
      tmux display-message "No save files found"
    fi
  else
    tmux display-message "Resurrect directory not found"
  fi'

# Interactive save file browser (requires fzf)
bind-key F8 run-shell '
  tmux display-popup -E -w 80% -h 80% "
    cd ${TMUX_RESURRECT} 2>/dev/null || exit 1
    file=\$(ls -t *.txt 2>/dev/null | fzf --prompt=\"Select save file: \" --height=40%)
    if [ -n \"\$file\" ]; then
      cp \"\$file\" last
      tmux display-message \"Will restore from: \$file\"
    fi
    read -p \"Press Enter to close...\"
  "'
