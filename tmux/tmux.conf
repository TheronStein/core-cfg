# Set binary directory for custom commands
BIN_DIR="$ZDOTDIR/zinit/polaris/bin"

set -g prefix C-Space
unbind C-b
bind C-Space send-prefix

source-file "~/.core/cfg/tmux/keymaps/escape-codes.conf"
source-file "~/.core/cfg/tmux/conf/plugins.conf"
# Source configuration files in proper order

# Terminal/Environment setup
source-file "~/.core/cfg/tmux/conf/global.conf"
source-file "~/.core/cfg/tmux/conf/env.conf"
source-file "~/.core/cfg/tmux/conf/term.conf"
source-file "~/.core/cfg/tmux/conf/colors.conf"
# source-file "~/.core/cfg/tmux/conf/user-keys.conf"
source-file "~/.core/cfg/tmux/conf/hooks.conf"

#TMUX Commands and Input
source-file "~/.core/cfg/tmux/keymaps/core.conf"
source-file "~/.core/cfg/tmux/keymaps/mouse.conf"

#UI and Navigation bindings
# source-file "~/.core/cfg/tmux/keymaps/app.conf"
source-file "~/.core/cfg/tmux/keymaps/menus.conf"
source-file "~/.core/cfg/tmux/keymaps/popups.conf"
source-file "~/.core/cfg/tmux/keymaps/ui.conf"
source-file "~/.core/cfg/tmux/keymaps/pane.conf"
source-file "~/.core/cfg/tmux/keymaps/window.conf"
source-file "~/.core/cfg/tmux/keymaps/clipboard.conf"

# Keytables
# source-file "~/.core/cfg/tmux/keymaps/copymode.conf"
source-file "~/.core/cfg/tmux/keymaps/resize-mode.conf"
source-file "~/.core/cfg/tmux/keymaps/copy-mode.conf"

# UI configuration
source-file "~/.core/cfg/tmux/conf/panes.conf"
# Use WezTerm-integrated status bar (comment out to use original)
source-file "~/.core/cfg/tmux/conf/status.conf"
# source-file "~/.core/cfg/tmux/conf/status.conf"
source-file "~/.core/cfg/tmux/conf/windows.conf"


run "$XDG_CONFIG_HOME/tmux/plugins/tpm/tpm"
run "$XDG_CONFIG_HOME/tmux/plugins/tmux-resurrect/resurrect.tmux"

# Yazibar - Dual Yazi Sidebar Module
run-shell "~/.core/cfg/tmux/modules/yazibar/yazibar.tmux"

# == Formats ================================================================ [[[
# https://github.com/tmux/tmux/wiki/Formats
# '#{t:var}'       => human readable time
# '#{d:path}'      => trim file from path
# '#{b:path}'      => trim dir from path
# '#{=3:@v}'       => trim text (foobar -> foo)
# '#{=-3:@v}'      => trim text (foobar -> bar)
# '#{=|5|...:@v}'  => trimmed on right ('foobar' -> 'fooba...')
# '#{=|-5|...:@v}' => trimmed on right ('foobar' -> '...oobar')
# '#{p9:@v}baz'    => pad text (foobar -> 'foobar   baz')
# '#{p-9:@v}baz'   => pad text (foobar -> '   foobarbaz')
# '#{=3;p-6:@v}'   => combine ('foobar' -> '   foo   ')

# Comparison
# '#{#,}'                    => escaped comma
# '#{==:#{@v}bar,foobar}'    => if v#{bar} == foobar then 1 else 0
# '#{!=:#{@v}bar,foobar}'    => if v#{bar} != foobar then 1 else 0
# '#{<:#{@v},bar}'           => if v < bar then 1 else 0
# '#{||:0,#{@v}}'            => if 0 || #{v} then 1 else 0
# '#{&&:0,#{@v}}'            => if 0 && #{v} then 1 else 0
# '#{?@v,yes,no}'            => if #{v} then yes else no
# '#{?#{==:#{@v},0},yes,no}' => if #{v} == 0 then yes else no
# '#{?#{==:#{@v},0},#{@v} is true,#{@v} is false}'  => if #{v} == 0 then '#{v} is true' else '#{v} is false'

# Substitution
# '#{s|foo|bar|:@v}'            => s/foo/bar @v
# '#{s|(foo)(bar)|\2\1|:@v}'    => s/(foo)(bar)/\2\1 @v
# '#{s|#{@w}|xxx|:@v}'          => s/#w/xxx @v
# '#{s|FOO|xxx|i:@v}'           => s/FOO/xxx/i @v
# '#{s|foo|xxx|;s|bar|yyy|:@v}' => s/foo/xxx;s/bar/yyy @v

# Arithmetic
# '#{e|+|:1,1}'       => 2
# '#{e|-|:1,1}'       => 0
# '#{e|*|:1,1}'       => 1
# '#{e|/|f|4:10,3}'   => 3.3333
# '#{e|m|:4,3}'       => 1

# Matching
# '#{m:*foo*,#{@v}}'     => v=foobar; 1 if pattern matches else 0 (1)
# '#{m|ri:^FOO,#{@v}}'   => v=foobar; r=regex i=ignore_case; 1 if pattern matches else 0 (1)

# C = searches for format in pane content; returns line number or 0
# '#{C:x*z}'
# '#{C|r:x.z}'

# Loops (S W P)
# '#{W:#{window_name} }'      => irssi mutt emacs ksh ksh ksh ksh ksh ksh emacs emacs ksh
# '#{W:#{window_name} ,--- }' => irssi mutt emacs ksh ksh ksh ksh ksh --- emacs emacs ksh

# Literals and Quoting
#   - l = literal string given to it
#   - q = quote special chars
# '#{?#{l:1},a,b}'
# '#{q:@v}'

# Expand more than once (E T)
# '#{status-left}'   => [#{session_name}]
# '#{T:status-left}' => [0]

# #{?#{&&:#{||:#{window_activity_flag},#{window_silence_flag}},#{!=:#{window-status-activity-style},default}}, #{window-status-activity-style},}
# ]]]

# vim: ft=tmux:et:sw=0:ts=2:sts=2:fdm=marker:fmr=[[[,]]]:
