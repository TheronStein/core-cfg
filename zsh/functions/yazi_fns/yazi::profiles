#!/usr/bin/env zsh
# Different yazi profiles for different use cases

# Default yazi
yazi::default() {
    YAZI_CONFIG_HOME=~/.core/cfg/yazi yazi "$@"
}

# Minimal yazi (fast, no plugins)
yazi::minimal() {
    YAZI_CONFIG_HOME=~/.core/cfg/yazi-minimal yazi "$@"
}

# Development yazi (code-focused keybinds and previews)
yazi::dev() {
    YAZI_CONFIG_HOME=~/.config/cfg/yazi-dev yazi "$@"
}

# Media yazi (image/video previews, media keybinds)
yazi::media() {
    YAZI_CONFIG_HOME=~/.config/yazi-media yazi "$@"
}

# Server yazi (no previews, minimal deps)
yazi::server() {
    YAZI_CONFIG_HOME=~/.config/yazi-server yazi "$@"
}

# Launch yazi with temporary config for testing
yazi::test() {
    local tmp_config="/tmp/yazi-test-$$"
    cp -r ~/.config/yazi "$tmp_config"
    YAZI_CONFIG_HOME="$tmp_config" yazi "$@"
    rm -rf "$tmp_config"
}

# Select profile with fzf
yazi::select() {
    local profiles=(
        "default:Standard configuration"
        "dev:Development focused"
    )
    
    local selected=$(printf '%s\n' "${profiles[@]}" | fzf --delimiter=':' --with-nth=2 --preview-window=hidden)
    
    if [[ -n "$selected" ]]; then
        local profile="${selected%%:*}"
        yazi::$profile "$@"
    fi
}
